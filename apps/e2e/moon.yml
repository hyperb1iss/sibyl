$schema: https://moonrepo.dev/schemas/project.json
language: python
toolchains:
  default: system
tasks:
  test:
    command: uv run pytest
    inputs:
    - '@group(tests)'
    preset: server
  test-api:
    command: uv run pytest -m 'api or cli'
    inputs:
    - '@group(tests)'
    preset: server
  test-browser:
    command: uv run pytest -m browser
    inputs:
    - '@group(tests)'
    preset: server
  playwright-install:
    command: uv run playwright install chromium
    preset: server
  sync:
    command: uv sync
    inputs:
    - '@group(configs)'
  lint:
    command: uv run ruff check tests
    inputs:
    - '@group(tests)'
  format:
    command: uv run ruff format tests
    inputs:
    - '@group(tests)'
    preset: server
tags:
- python
- e2e
- testing
fileGroups:
  tests:
  - tests/**/*.py
  configs:
  - pyproject.toml
  - moon.yml
layer: application
