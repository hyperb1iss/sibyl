# sibyl-core package tasks
$schema: "https://moonrepo.dev/schemas/project.json"

type: library
language: python
platform: system

tags:
  - python
  - library
  - core

fileGroups:
  sources:
    - "src/**/*.py"
  tests:
    - "tests/**/*.py"
  configs:
    - "pyproject.toml"
    - "moon.yml"

tasks:
  sync:
    command: "uv sync"
    inputs:
      - "@group(configs)"

  lint:
    command: "uv run ruff check src/ tests/"
    inputs:
      - "@group(sources)"
      - "@group(tests)"

  format:
    command: "uv run ruff format src/ tests/"
    inputs:
      - "@group(sources)"
      - "@group(tests)"

  typecheck:
    command: "uv run pyright src/"
    inputs:
      - "@group(sources)"

  test:
    command: "uv run pytest tests/ -v"
    inputs:
      - "@group(sources)"
      - "@group(tests)"

  check:
    deps:
      - "~:lint"
      - "~:typecheck"
      - "~:test"
